!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiKey=t,this.nextPage="",this.searchText=""}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"getVideosData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;this.searchText=e||this.searchText;var r="https://www.googleapis.com/youtube/v3/search?pageToken=".concat(this.nextPage,"&key=").concat(this.apiKey,"&type=video&part=snippet&maxResults=").concat(n,"&q=").concat(this.searchText);return this.constructor.request(r).then(function(e){var n=JSON.parse(e);return t.nextPage=n.nextPageToken,n.items}).then(function(e){for(var n=[],r=0;r<e.length;r+=1){var i="https://www.googleapis.com/youtube/v3/videos?key=AIzaSyCTWC75i70moJLzyNh3tt4jzCljZcRkU8Y&id=".concat(e[r].id.videoId,"&part=snippet,statistics");n.push(t.constructor.request(i))}return Promise.all(n).then(function(e){return e.map(function(e){return JSON.parse(e)})})}).catch(function(e){return new Error("Ничего не найдено...")})}}],[{key:"request",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=function(){if(200===r.status)t(r.response);else{var e=new Error(r.statusText);e.code=r.status,n(e)}},r.onerror=function(){n(new Error("Network Error"))},r.send()})}}]),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"init",value:function(){this.constructor.addElement("input","body","",["id","search"],["placeholder","Search"]),this.constructor.addElement("div","body","",["id","videoListWrapper"]),this.constructor.addElement("div","body","",["id","paginationWrapper"])}},{key:"addPagination",value:function(){for(var e="",t=this.app.allPages-3;t<this.app.allPages;t+=1)e=0===t?"select":"",this.constructor.addElement("div","#paginationWrapper",t+1,["id","pageBubble#".concat(t+1)],["class","pageBubble ".concat(e)]).addEventListener("click",this.app.pagination.bind(this.app))}},{key:"renderNewVideos",value:function(e){var t=this;if(!e.message)return document.querySelector("#error").innerHTML="",this.constructor.addElement("div","#videoListWrapper","",["class","videoList"]),e.forEach(function(e){var n=t.constructor.addElement("div","#videoListWrapper .videoList:last-child","",["class","video"]);n.onclick=function(){window.open("https://www.youtube.com/watch?v=".concat(e.items[0].id),"_blank")},n.appendChild(t.constructor.addElement("li","",e.items[0].snippet.localized.title,["class","title"])),n.appendChild(t.constructor.addElement("img","","",["src",e.items[0].snippet.thumbnails.high.url])),n.appendChild(t.constructor.addElement("i","","",["class","fa fa-thumbs-o-up"])),n.appendChild(t.constructor.addElement("span","i",e.items[0].statistics.likeCount)),n.appendChild(t.constructor.addElement("i","","",["class","fa fa-thumbs-o-down"])),n.appendChild(t.constructor.addElement("span","i",e.items[0].statistics.dislikeCount)),n.appendChild(t.constructor.addElement("i","","",["class","fa fa-eye"])),n.appendChild(t.constructor.addElement("span","i",e.items[0].statistics.viewCount))}),!0;document.querySelector("#error").innerHTML=e.message}}],[{key:"reload",value:function(){document.querySelector("#videoListWrapper").innerHTML="",document.querySelector("#paginationWrapper").innerHTML=""}},{key:"addElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.createElement(e);r.innerHTML=n;for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return o.concat().forEach(function(e){return r.setAttribute(e[0],e[1])}),t&&document.querySelector(t).appendChild(r),r}}]),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=4,u=1;new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=new i(t),this.render=new a(this),this.finishRender=!0,this.currentPage=u,this.currentPosition=0,this.allPages=c-1,this.videosCount=c}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,[{key:"start",value:function(){this.render.init(),this.button=document.querySelector("#load"),this.searchInput=document.querySelector("#search"),this.addListeners()}},{key:"reload",value:function(){this.client.nextPage="",a.reload(),this.currentPage=u,this.currentPosition=0,this.allPages=c-1,this.videosCount=c,document.querySelector("#videoListWrapper").style.transform="translate(0px)"}},{key:"loadVideos",value:function(e){var t=this;this.finishRender=!1,this.client.getVideosData(e,this.videosCount).then(function(n){return t.render.renderNewVideos(n),t.client.getVideosData(e,t.videosCount)}).then(function(n){return t.render.renderNewVideos(n),t.client.getVideosData(e,t.videosCount)}).then(function(e){t.render.renderNewVideos(e),t.finishRender=!0})}},{key:"search",value:function(){this.reload(),this.finishRender&&this.loadVideos(this.searchInput.value),this.render.addPagination()}},{key:"addListeners",value:function(){this.searchInput.addEventListener("keypress",this.search.bind(this))}},{key:"pagination",value:function(e){var t=document.querySelector("#videoListWrapper"),n=e.target.id.match(/\d+/)[0],r=1280*(this.currentPage-n),i=this.currentPosition+r;document.querySelectorAll(".pageBubble").forEach(function(e){return e.classList.remove("select")}),e.target.classList.add("select"),this.currentPosition=i,t.style.transform="translate(".concat(i,"px)"),this.currentPage=n,this.allPages-this.currentPage<2&&(this.loadVideos(),this.allPages+=c-1,this.render.addPagination())}}]),e}())("AIzaSyClGey1KJwPPSpTLAnVlsEuDjLp4t4uAKM").start()}]);
//# sourceMappingURL=main.js.map